
@typeparam TValue

@using Appointment.Frontend.Services

<div>
    <RadzenDropDown TValue="string" 
        @bind-SearchText=SearchText 
        Placeholder="Buscar..."
        ValueProperty="Rowid"
        Value="Data"
        class="w-100"
        ValueChanged="SetValue"
        Disabled="@(Data.Count == 0)"
        AllowClear="true">

        <EmptyTemplate>
            <span>No hay datos</span>
        </EmptyTemplate>

        <Template Context="Item">

        </Template>

        <ValueTemplate>

        </ValueTemplate>

    </RadzenDropDown>
</div>

@code
{
    [Parameter] public TValue Value {get; set;} = default!;
    [Parameter] public EventCallback<TValue> ValueChanged {get; set;}
    [Parameter] public string PropertyName {get; set;} = null!;
    [Inject] public ApiService ApiService {get; set;} = null!;

    List<object> Data {get; set;} = new();
    
    string searchText = "";
    public string SearchText
    {
        get
        {
            return searchText;
        }
        set
        {
            if (searchText != value)
            {
                searchText = value;
            }
        }
    }

    protected override void OnInitialized()
    {
        _ = Search();
        base.OnInitialized();
    }

    async Task Search()
    {

    }

    void SetValue(object? Rowid)
    {

    }
}